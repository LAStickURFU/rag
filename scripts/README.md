# Скрипты обслуживания системы

## Миграция базы данных

Для добавления колонки `chunking_mode` в таблицу `documents` выполните следующие шаги:

1. Убедитесь, что у вас установлены все зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Запустите скрипт миграции:
   ```
   python scripts/run_migration.py scripts/add_chunking_mode_column.sql
   ```

3. Перезапустите приложение:
   ```
   python -m app.main
   ```

## Обновление режима чанкинга

После миграции базы данных, при переиндексации документов режим чанкинга будет автоматически обновлен в соответствии с текущими настройками системы.

Для выполнения переиндексации всех документов:

1. Войдите в приложение как администратор
2. Перейдите в раздел "Документы"
3. Нажмите кнопку "Переиндексировать все"

Также можно использовать API:
```
curl -X POST http://localhost:8000/documents/reindex -H "Authorization: Bearer YOUR_TOKEN" -d '{"all_users": true}'
``` 