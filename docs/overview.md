# Обзор RAG-системы

RAG (Retrieval-Augmented Generation) - это система генерации ответов на основе собственной базы знаний, которая объединяет технологии векторного поиска и генеративные языковые модели.

## Что такое RAG

Retrieval-Augmented Generation (RAG) - это подход в области искусственного интеллекта, который улучшает ответы языковых моделей путем:

1. **Извлечения** (Retrieval) - поиска релевантной информации из базы знаний
2. **Дополнения** (Augmentation) - обогащения промпта найденным контекстом
3. **Генерации** (Generation) - формирования ответа на основе обогащенного промпта

Такой подход позволяет:
- Получать более точные и основанные на фактах ответы
- Уменьшать количество галлюцинаций и неточностей в ответах
- Использовать актуальные данные, не ограничиваясь обучающей выборкой модели
- Четко отслеживать источники информации в ответах

## Ключевые возможности системы

### Работа с документами
- Загрузка документов различных форматов (PDF, DOCX, TXT, MD, JSON и др.)
- Разделение на фрагменты с использованием нескольких стратегий (символьный, токенный, иерархический и семантический чанкинг)
- Визуализация прогресса обработки в реальном времени
- Автоматическое обновление интерфейса при обработке документов

### Поиск и извлечение информации
- Гибридный поиск, комбинирующий dense retrieval (векторный) и sparse retrieval (BM25)
- Переранжирование результатов с использованием cross-encoder моделей
- Адаптивный подбор количества фрагментов в зависимости от релевантности
- Визуализация найденных источников с метаданными

### Генерация ответов
- Интеграция с локальными LLM через Ollama (по умолчанию mistral:7b-instruct)
- Формирование оптимального промпта с учетом релевантности найденных фрагментов
- Режим прямого запроса к LLM без использования RAG
- Сохранение истории запросов и ответов

### Пользовательский опыт
- Интуитивный веб-интерфейс на React
- Система аутентификации и авторизации
- Разграничение прав доступа (пользователи/администраторы)
- Персональные настройки параметров модели

### Дополнительные инструменты
- Инструменты для сбора данных с веб-сайтов
- Анализ качества текстового корпуса
- Система оценки качества RAG с использованием различных метрик
- Подробное логирование всех этапов работы

## Архитектура на высоком уровне

Система построена на основе микросервисной архитектуры с использованием Docker и включает следующие компоненты:

1. **Бэкенд (FastAPI)** - обработка документов и генерация ответов
2. **Vectorstore (Qdrant)** - хранение и поиск векторных представлений
3. **Языковая модель (Ollama)** - генерация ответов
4. **База данных (PostgreSQL)** - хранение метаданных и истории запросов
5. **Фронтенд (React)** - пользовательский интерфейс

Более подробное описание архитектуры и компонентов системы можно найти в [документации по архитектуре](./architecture.md). 