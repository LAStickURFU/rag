# Руководство пользователя

Это руководство содержит пошаговые инструкции по использованию RAG-системы для конечных пользователей.

## Содержание

- [Регистрация и вход](#регистрация-и-вход)
- [Загрузка документов](#загрузка-документов)
- [Мониторинг обработки документов](#мониторинг-обработки-документов)
- [Поиск и генерация ответов](#поиск-и-генерация-ответов)
- [Персональные настройки](#персональные-настройки)
- [Управление документами](#управление-документами)
- [История запросов](#история-запросов)
- [Режим прямого запроса](#режим-прямого-запроса)

## Регистрация и вход

### Регистрация нового пользователя

1. Откройте веб-интерфейс системы по адресу http://localhost:3000
2. Нажмите на кнопку "Регистрация" или перейдите по ссылке http://localhost:3000/register
3. Заполните форму регистрации:
   - Имя пользователя (username)
   - Адрес электронной почты (email)
   - Пароль
4. Нажмите кнопку "Зарегистрироваться"

### Вход в систему

1. Откройте http://localhost:3000/login
2. Введите имя пользователя и пароль
3. Нажмите кнопку "Войти"

*Примечание*: Вы также можете использовать демонстрационную учетную запись администратора:
- Логин: admin
- Пароль: admin123

## Загрузка документов

### Поддерживаемые форматы

Система поддерживает следующие форматы документов:
- PDF (*.pdf)
- Microsoft Word (*.docx, *.doc)
- Текстовые файлы (*.txt)
- Markdown (*.md)
- JSON (*.json)
- HTML (*.html, *.htm)
- и другие текстовые форматы

### Пошаговая загрузка

1. В боковом меню выберите "Загрузка документов" или перейдите по адресу http://localhost:3000/upload
2. Нажмите кнопку "Выбрать файлы" или перетащите файлы в область загрузки
3. Для каждого файла укажите заголовок в соответствующем поле формы
4. Нажмите кнопку "Загрузить" для начала процесса обработки

*Рекомендации по загрузке*:
- Оптимальный размер файла: до 10 МБ
- Избегайте загрузки файлов с преимущественно графическим содержимым
- Для лучших результатов загружайте хорошо структурированные документы с явным форматированием

## Мониторинг обработки документов

После загрузки документы проходят несколько этапов обработки, которые вы можете отслеживать в разделе "Документы".

### Статусы обработки

| Статус | Описание | Прогресс |
|--------|----------|----------|
| uploaded | Документ загружен, ожидает обработки | 10% |
| processing | Извлечение текста из документа | 25% |
| chunking | Разбиение текста на фрагменты | 50% |
| embedding | Создание векторных представлений | 75% |
| indexing | Добавление в поисковый индекс | 90% |
| indexed | Обработка завершена, документ готов | 100% |
| reindexing | Документ переиндексируется | -- |
| error | Ошибка при обработке | -- |

### Отслеживание прогресса

1. Перейдите в раздел "Документы" (http://localhost:3000/documents)
2. Просматривайте текущий статус всех документов в таблице
3. Для каждого документа отображается:
   - Заголовок и имя файла
   - Статус обработки с индикатором прогресса
   - Время загрузки
   - Размер документа и количество созданных фрагментов

*Примечание*: Страница документов автоматически обновляется каждые 2 секунды во время обработки.

## Поиск и генерация ответов

### Задавание вопросов к документам

1. Перейдите в раздел "Чат" (http://localhost:3000/chat)
2. Введите ваш вопрос в текстовое поле в нижней части экрана
3. Нажмите кнопку "Отправить" или клавишу Enter

### Просмотр ответов и источников

После обработки запроса система выполнит:
1. Поиск релевантной информации в ваших документах
2. Генерацию ответа на основе найденного контекста

Результат будет содержать:
- Сгенерированный ответ на ваш вопрос
- Список источников информации
- Индикаторы релевантности для каждого источника

### Работа с источниками

Для каждого фрагмента-источника вы можете:
1. Развернуть его, чтобы увидеть полный текст
2. Посмотреть название документа-источника
3. Увидеть оценку релевантности (от 0 до 1)

*Рекомендации по формулировке вопросов*:
- Задавайте конкретные вопросы, избегайте абстрактных формулировок
- Включайте ключевые термины, которые могут присутствовать в документах
- Избегайте слишком коротких запросов (менее 3-4 слов)
- Используйте естественный язык, как если бы вы спрашивали человека

## Персональные настройки

### Настройка модели

1. Перейдите в раздел "Настройки" (http://localhost:3000/settings)
2. В блоке "Настройки модели" вы можете изменить:
   - **Модель**: выбор модели Ollama для генерации ответов
   - **Temperature**: значение от 0 до 1, контролирует креативность (меньше = более детерминированный ответ)
   - **Top-P**: параметр семплирования (по умолчанию 0.9)
   - **Максимальная длина ответа**: максимальное количество токенов в ответе
   - **Количество фрагментов**: сколько фрагментов использовать для контекста

3. После внесения изменений нажмите "Сохранить настройки"

### Рекомендуемые настройки

| Сценарий | Temperature | Top-P | Фрагментов |
|----------|-------------|-------|------------|
| Точные фактические ответы | 0.0-0.1 | 0.9 | 5-7 |
| Творческие ответы | 0.6-0.7 | 0.95 | 3-5 |
| Сложные вопросы с аргументацией | 0.3-0.4 | 0.9 | 7-10 |

## Управление документами

### Просмотр списка документов

1. Перейдите в раздел "Документы" (http://localhost:3000/documents)
2. Вы увидите список всех ваших документов с информацией:
   - Заголовок и имя файла
   - Статус обработки
   - Дата загрузки
   - Размер и количество фрагментов

### Удаление документов

1. В списке документов найдите нужный документ
2. Нажмите кнопку "Удалить" (значок корзины) справа от документа
3. Подтвердите удаление в диалоговом окне

### Переиндексация документов

Если вы изменили настройки системы (модель эмбеддингов, размер фрагментов и т.д.), вы можете переиндексировать документы:

1. Перейдите в раздел "Документы"
2. Нажмите кнопку "Переиндексировать все" в верхней части страницы
3. Подтвердите операцию в диалоговом окне

*Примечание*: Процесс переиндексации может занять продолжительное время в зависимости от количества и размера документов.

## История запросов

### Просмотр истории

1. В разделе "Чат" вы можете просматривать историю своих запросов и ответов
2. История сохраняется автоматически и доступна между сеансами

### Очистка истории

1. В разделе "Чат" нажмите кнопку "Очистить историю" в верхней части чата
2. Подтвердите операцию в диалоговом окне

## Режим прямого запроса

Вы можете отправлять запросы напрямую языковой модели, без использования RAG (поиска в документах):

1. В чате нажмите кнопку переключения режима (переключатель "RAG / Прямой запрос")
2. Когда активирован режим "Прямой запрос", система отправляет ваш вопрос напрямую в LLM
3. Ответ будет основан только на знаниях модели, без привлечения ваших документов

*Примечание*: В этом режиме не отображаются источники, так как поиск не выполняется.

## Устранение проблем

### Частые проблемы и решения

| Проблема | Возможные причины | Решение |
|----------|-------------------|--------|
| Документ застрял в статусе "processing" | Сложный формат документа, большой размер | Попробуйте преобразовать документ в более простой формат (TXT, MD) |
| Нерелевантные ответы | Недостаточно документов, неподходящие настройки | Загрузите больше релевантных документов, настройте количество фрагментов |
| Ошибка "Failed to connect to Ollama" | Ollama не запущен или недоступен | Убедитесь, что Ollama запущен и доступен по адресу http://localhost:11434 |
| Низкая скорость обработки документов | Большие документы, медленная система | Попробуйте разделить большие документы на несколько меньших |

### Обратная связь

Если вы столкнулись с проблемами или у вас есть предложения по улучшению системы:

1. Опишите проблему максимально подробно
2. Укажите шаги для воспроизведения
3. Приложите скриншоты, если возможно
4. Отправьте отчет разработчикам системы 